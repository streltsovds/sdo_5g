(function(a,b){function m(a,b){a==null&&(a="jserror"),d?d.emit(a,b):errors.push({level:a,message:b})}function n(a,b){var c={},d;b==null&&(b={});for(d in h)h.hasOwnProperty(d)&&(c[d]=h[d]);for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);c.timeStamp==null&&(c.timeStamp=(new Date).getTime()),m(a,c)}function o(a){var b,c=i.length;if(a){o.ready=!0,d=a;if(c>0)for(b=0;b<c;++b)m(i[b].level,i[b].message)}}function p(a){var b;b=io.connect(a),b.on("connect",function(){o(b)})}function q(a){return typeof a=="string"?a=="true"||a=="1":!!a}"use strict";var c,d,e,f,g,h,i,j,k,l=Object.prototype.toString;k=a.logger={log:function(a,b){n(a,{message:String(b)})},info:function(a){k.log("info",a)},debug:function(a){k.log("debug",a)},error:function(a){k.log("error",a)}},e=b.documentElement.getAttribute("data-config");try{e=JSON.parse(e).logger}catch(r){e=null}if(!e||!q(e.writelog)||!e.logserver)return;c=e.logserver,c.charAt(c.length-1)=="/"&&(c=c.substr(0,c.length-1)),/^(http[s]?:)?\/\//.test(c)||(c="//"+c),c=c.split("/");if(c.length==3)c=c.join("/")+"/log";else{if(c.length<3)return;c=c.join("/")}g=a.onerror,i=[],f=b.documentElement.getAttribute("data-user");try{f=JSON.parse(f)}catch(r){f=null}h={href:b.location.href,user:f,env:b.documentElement.getAttribute("data-env"),ua:navigator.userAgent},a.onerror=function(a,b,c){try{n("jserror",{filename:b,lineno:c,message:a}),g&&g.apply(this,arguments)}catch(d){}},j=setInterval(function(){a.io&&(clearInterval(j),j=null,p(c))},100),setTimeout(function(){j!=null&&clearInterval(j)},15e3),function(){var a=b.createElement("script"),d=e.socketio||"",f=b.getElementById("socketio");if(f)return;d||(d=c.split("/").slice(0,3).join("/")+"/socket.io/socket.io.js"),a.setAttribute("id","socketio"),a.async=!0,a.src=d,b.documentElement.firstChild?b.documentElement.insertBefore(a,b.documentElement.firstChild):b.documentElement.appendChild(a)}()})(this,this.document);